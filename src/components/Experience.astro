---
import type { Lang } from '../i18n/utils';

export interface Props {
    experience: string;
    lang?: Lang;
};

const { experience, lang = 'es' } = Astro.props;

const translations = {
  es: {
    from: "Desde",
    to: "Hasta",
    present: "Presente",
    indra: {
      position: "Arquitecto de Información",
      resp: [
        "Analizo, organizo tareas y desarrollo evolutivos de sistemas tributarios (ATC), mejorando rendimiento y mantenibilidad.",
        "Implementé optimizaciones apoyadas en IA para mejorar procesos.",
        "Mentoría técnica a <strong>+20 desarrolladores</strong> en equipos LATAM.",
        "Impulso prácticas DevOps (CI/CD, observabilidad).",
        "Coordiné entregas en entornos distribuidos logrando <strong>cumplimiento del 95% en hitos</strong> de proyecto."
      ]
    },
    sapia: {
      position: "Arquitecto de Información",
      resp: [
        "Gestioné requisitos no funcionales mejorando <strong>disponibilidad del sistema a 99.9%</strong>.",
        "Lideré PoCs cloud reduciendo <strong>costos de infraestructura en 20%</strong>.",
        "Optimicé rendimiento de servicios críticos reduciendo <strong>incidencias productivas en 40%</strong>."
      ]
    },
    sunat: {
      position: "Analista de Sistemas",
      resp: [
        "Participé en modernización de sistemas usados por <strong>+1000 usuarios internos</strong>.",
        "Implementé mejoras que redujeron <strong>tiempos de procesamiento batch en 25%</strong>.",
        "Contribuí a proyectos nacionales de alto impacto tributario."
      ]
    }
  },
  en: {
    from: "From",
    to: "To",
    present: "Present",
    indra: {
      position: "Information Architect",
      resp: [
        "Analyze, organize tasks and develop tax system evolutives (ATC), improving performance and maintainability.",
        "Implemented AI-supported optimizations to improve processes.",
        "Technical mentoring to <strong>+20 developers</strong> in LATAM teams.",
        "Drive DevOps practices (CI/CD, observability).",
        "Coordinated deliveries in distributed environments achieving <strong>95% compliance in project milestones</strong>."
      ]
    },
    sapia: {
      position: "Information Architect",
      resp: [
        "Managed non-functional requirements improving <strong>system availability to 99.9%</strong>.",
        "Led cloud PoCs reducing <strong>infrastructure costs by 20%</strong>.",
        "Optimized performance of critical services reducing <strong>production incidents by 40%</strong>."
      ]
    },
    sunat: {
      position: "Systems Analyst",
      resp: [
        "Participated in modernization of systems used by <strong>+1000 internal users</strong>.",
        "Implemented improvements that reduced <strong>batch processing times by 25%</strong>.",
        "Contributed to national projects with high tax impact."
      ]
    }
  }
};

const t = translations[lang];

// var fromDate = new Date(2020, 9, 1); // 1 de Oct de 2020
// var toDate = new Date(); // Today

// var yearsAndMonths = calcYearsAndMonths(fromDate, toDate);
// let resultadoFinal = yearsAndMonths.years + ' Años ' + yearsAndMonths.months + ' Meses';

---

<section id="experience" class="section section-secondary section-no-border m-0">
    <div class="container">
        <div class="row">
            <div class="col">
                <h2 class="text-color-light text-uppercase font-weight-extra-bold">{experience}</h2>
                <section class="timeline custom-timeline" id="timeline">
                    <div class="timeline-body">
                        <article class="timeline-box right custom-box-shadow-2">
                            <div class="row">
                                <div class="experience-info col-lg-3 col-sm-5 bg-color-primary">
                                    <span class="from text-color-light text-uppercase">
                                        {t.from}
                                        <span class="font-weight-semibold">Oct 2020</span>
                                    </span>
                                    <span class="to text-color-light text-uppercase">
                                        {t.to}
                                        <span class="font-weight-semibold">{t.present}</span>
                                    </span>
                                    <p class="text-color-light" id="resultadoFinal"></p>
                                    <span class="company text-color-light font-weight-semibold">
                                        Indra Company
                                        <span class="company-location text-color-light font-weight-normal text-uppercase">Perú/España</span>
                                    </span>
                                </div>
                                <div class="experience-description col-lg-9 col-sm-7 bg-color-dark">
                                    <h4 class="text-color-light font-weight-semibold">{t.indra.position}</h4>
                                    {t.indra.resp.map(r => <p class="custom-text-color-2" set:html={`• ${r}`}></p>)}
                                </div>
                            </div>
                        </article>
                        <article class="timeline-box right custom-box-shadow-2">
                            <div class="row">
                                <div class="experience-info col-lg-3 col-sm-5 bg-color-primary">
                                    <span class="from text-color-light text-uppercase">
                                        {t.from}
                                        <span class="font-weight-semibold">Abr 2017</span>
                                    </span>
                                    <span class="to text-color-light text-uppercase">
                                        {t.to}
                                        <span class="font-weight-semibold">Sep 2020</span>
                                    </span>
                                    <p class="text-color-light">(3 Años 6 Meses)</p>
                                    <span class="company text-color-light font-weight-semibold">
                                        Sapia
                                        <span class="company-location text-color-light font-weight-normal text-uppercase">Perú</span>
                                    </span>
                                </div>
                                <div class="experience-description col-lg-9 col-sm-7 bg-color-dark">
                                    <h4 class="text-color-light font-weight-semibold">{t.sapia.position}</h4>
                                    {t.sapia.resp.map(r => <p class="custom-text-color-2" set:html={`• ${r}`}></p>)}
                                </div>
                            </div>
                        </article>
                        <article class="timeline-box right custom-box-shadow-2">
                            <div class="row">
                                <div class="experience-info col-lg-3 col-sm-5 bg-color-primary">
                                    <span class="from text-color-light text-uppercase">
                                        {t.from}
                                        <span class="font-weight-semibold">Feb 2010</span>
                                    </span>
                                    <span class="to text-color-light text-uppercase">
                                        {t.to}
                                        <span class="font-weight-semibold">Dic 2016</span>
                                    </span>
                                    <p class="text-color-light">(6 Años 11 Meses)</p>
                                    <span class="company text-color-light font-weight-semibold">
                                        SUNAT
                                        <span class="company-location text-color-light font-weight-normal text-uppercase">Perú</span>
                                    </span>
                                </div>
                                <div class="experience-description col-lg-9 col-sm-7 bg-color-dark">
                                    <h4 class="text-color-light font-weight-semibold">{t.sunat.position}</h4>
                                    {t.sunat.resp.map(r => <p class="custom-text-color-2" set:html={`• ${r}`}></p>)}
                                </div>
                            </div>
                        </article>
                        <div class="timeline-bar"></div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</section>